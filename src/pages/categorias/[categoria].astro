---
import Layout from "../../layouts/Layout.astro";

// 游댳 Definir la interfaz para los productos
interface Producto {
  nombre: string;
  descripcion: string;
  link: string;
}

// 游댳 `getStaticPaths()` para generar las p치ginas est치ticas
export async function getStaticPaths(): Promise<{ params: { categoria: string } }[]> {
  // Definir los productos dentro de la funci칩n para evitar problemas de scope
  const productosPorCategoria: Record<string, Producto[]> = {
    belleza: [
      { nombre: "Labial Mate", descripcion: "Colores intensos y de larga duraci칩n", link: "#" },
      { nombre: "Crema Hidratante", descripcion: "Para una piel suave y luminosa", link: "#" }
    ],
    deporte: [
      { nombre: "Zapatillas Deportivas", descripcion: "Ideales para correr y entrenar", link: "#" },
      { nombre: "Pesas 5kg", descripcion: "Para fortalecer tus m칰sculos", link: "#" }
    ],
    hogar: [
      { nombre: "Cafetera Autom치tica", descripcion: "Caf칠 perfecto cada ma침ana", link: "#" },
      { nombre: "Aspiradora Inteligente", descripcion: "Limpieza sin esfuerzo", link: "#" }
    ],
    moda: [
      { nombre: "Reloj Elegante", descripcion: "Un accesorio para cualquier ocasi칩n", link: "#" },
      { nombre: "Chaqueta de Cuero", descripcion: "Estilo y comodidad en un solo producto", link: "#" }
    ],
    tecnologia: [
      { nombre: "Smartphone X", descripcion: "El 칰ltimo modelo con tecnolog칤a avanzada", link: "#" },
      { nombre: "Auriculares Inal치mbricos", descripcion: "Sonido envolvente sin cables", link: "#" }
    ]
  };

  return Object.keys(productosPorCategoria).map((categoria) => ({
    params: { categoria }
  }));
}

// 游댳 Obtener el par치metro de la URL
const { categoria } = Astro.params as { categoria?: string };

// 游댳 Definir los productos de nuevo en el 치mbito correcto
const productosPorCategoria: Record<string, Producto[]> = {
  belleza: [
    { nombre: "Labial Mate", descripcion: "Colores intensos y de larga duraci칩n", link: "#" },
    { nombre: "Crema Hidratante", descripcion: "Para una piel suave y luminosa", link: "#" }
  ],
  deporte: [
    { nombre: "Zapatillas Deportivas", descripcion: "Ideales para correr y entrenar", link: "#" },
    { nombre: "Pesas 5kg", descripcion: "Para fortalecer tus m칰sculos", link: "#" }
  ],
  hogar: [
    { nombre: "Cafetera Autom치tica", descripcion: "Caf칠 perfecto cada ma침ana", link: "#" },
    { nombre: "Aspiradora Inteligente", descripcion: "Limpieza sin esfuerzo", link: "#" }
  ],
  moda: [
    { nombre: "Reloj Elegante", descripcion: "Un accesorio para cualquier ocasi칩n", link: "#" },
    { nombre: "Chaqueta de Cuero", descripcion: "Estilo y comodidad en un solo producto", link: "#" }
  ],
  tecnologia: [
    { nombre: "Smartphone X", descripcion: "El 칰ltimo modelo con tecnolog칤a avanzada", link: "#" },
    { nombre: "Auriculares Inal치mbricos", descripcion: "Sonido envolvente sin cables", link: "#" }
  ]
};

// 游댳 Asegurar que `categoria` sea una cadena v치lida
const productos: Producto[] = categoria && productosPorCategoria[categoria] ? productosPorCategoria[categoria] : [];
---

<Layout>
  <h1 class="text-3xl font-bold text-center my-6 capitalize">{categoria ?? "Categor칤a no encontrada"}</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 px-4">
    {productos.length > 0
      ? productos.map((producto) => (
          <a href={producto.link} class="block bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition">
            <h2 class="text-xl font-semibold">{producto.nombre}</h2>
            <p class="text-gray-600">{producto.descripcion}</p>
          </a>
        ))
      : <p class="text-center text-gray-500">No hay productos en esta categor칤a.</p>
    }
  </div>
</Layout>
