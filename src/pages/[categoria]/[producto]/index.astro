---
import Layout from "../../../layouts/Layout.astro";
import productosJson from "../../../data/productos.json";

// Obtener la categorÃ­a y el producto desde la URL
const { categoria, producto } = Astro.params as { categoria?: string; producto?: string };

// Verificar que la categorÃ­a y el producto existen en `productosJson`
const productos = categoria && productosJson[categoria as keyof typeof productosJson] 
  ? productosJson[categoria as keyof typeof productosJson] 
  : [];

const productoSeleccionado = productos.find(p => p.nombre.toLowerCase().replace(/\s+/g, "-") === producto);

if (!productoSeleccionado) {
  throw new Error("Producto no encontrado");
}
---

<Layout>
  <section class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-r from-purple-600 via-pink-500 to-red-500 text-white p-10 text-center">
    <h1 class="text-6xl font-extrabold animate-pulse">
      ðŸŽ‰ {productoSeleccionado.nombre.toUpperCase()} ðŸŽ‰
    </h1>
    <p class="mt-6 text-2xl italic max-w-2xl">{productoSeleccionado.descripcion}</p>
    
    <a href={productoSeleccionado.link} target="_blank"
       class="mt-8 bg-yellow-400 hover:bg-yellow-300 text-black font-bold py-4 px-8 rounded-full text-xl shadow-lg transition transform hover:scale-110">
      ðŸš€ Â¡CÃ³mpralo ahora!
    </a>

    <div class="mt-10 p-6 bg-white text-black rounded-lg shadow-lg">
      <h2 class="text-4xl font-bold">ðŸ”¥ Oferta exclusiva ðŸ”¥</h2>
      <p class="text-xl mt-2">Este producto es de los mÃ¡s vendidos en {categoria}.</p>
    </div>
  </section>
</Layout>
